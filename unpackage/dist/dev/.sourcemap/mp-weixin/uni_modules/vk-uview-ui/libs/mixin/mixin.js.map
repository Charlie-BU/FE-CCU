{"version":3,"file":"mixin.js","sources":["uni_modules/vk-uview-ui/libs/mixin/mixin.js"],"sourcesContent":["export default {\n\tdata() {\n\t\treturn {}\n\t},\n\tonLoad() {\n\t\t// getRect挂载到$u上，因为这方法需要使用in(this)，所以无法把它独立成一个单独的文件导出\n\t\tthis.$u.getRect = this.$uGetRect\n\t},\n\tmethods: {\n\t\t// 查询节点信息\n\t\t// 目前此方法在支付宝小程序中无法获取组件跟接点的尺寸，为支付宝的bug(2020-07-21)\n\t\t// 解决办法为在组件根部再套一个没有任何作用的view元素\n\t\t$uGetRect(selector, all) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tuni.createSelectorQuery().\n\t\t\t\tin(this)[all ? 'selectAll' : 'select'](selector)\n\t\t\t\t\t.boundingClientRect(rect => {\n\t\t\t\t\t\tif (all && Array.isArray(rect) && rect.length) {\n\t\t\t\t\t\t\tresolve(rect)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!all && rect) {\n\t\t\t\t\t\t\tresolve(rect)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.exec()\n\t\t\t})\n\t\t},\n\t\tgetParentData(parentName = '') {\n\t\t\t// 避免在created中去定义parent变量\n\t\t\tif(!this.parent) this.parent = false;\n\t\t\t// 这里的本质原理是，通过获取父组件实例(也即u-radio-group的this)\n\t\t\t// 将父组件this中对应的参数，赋值给本组件(u-radio的this)的parentData对象中对应的属性\n\t\t\t// 之所以需要这么做，是因为所有端中，头条小程序不支持通过this.parent.xxx去监听父组件参数的变化\n\t\t\tthis.parent = this.$u.$parent.call(this, parentName);\n\t\t\tif(this.parent) {\n\t\t\t\t// 历遍parentData中的属性，将parent中的同名属性赋值给parentData\n\t\t\t\tObject.keys(this.parentData).map(key => {\n\t\t\t\t\tthis.parentData[key] = this.parent[key];\n\t\t\t\t});\n\t\t\t\t// #ifdef VUE3\n\t\t\t\tthis.parentData.value = this.parent.modelValue;\n\t\t\t\t// #endif\n\t\t\t}\n\t\t},\n\t\t// 阻止事件冒泡\n\t\tpreventEvent(e) {\n\t\t\te && e.stopPropagation && e.stopPropagation()\n\t\t}\n\t},\n\tonReachBottom() {\n\t\tuni.$emit('uOnReachBottom')\n\t},\n  // #ifndef VUE3\n  beforeDestroy() {\n    // 判断当前页面是否存在parent和chldren，一般在checkbox和checkbox-group父子联动的场景会有此情况\n    // 组件销毁时，移除子组件在父组件children数组中的实例，释放资源，避免数据混乱\n    if(this.parent && uni.$u.test.array(this.parent.children)) {\n    \t// 组件销毁时，移除父组件中的children数组中对应的实例\n    \tconst childrenList = this.parent.children\n    \tchildrenList.map((child, index) => {\n    \t\t// 如果相等，则移除\n    \t\tif(child === this) {\n    \t\t\tchildrenList.splice(index, 1)\n    \t\t}\n    \t})\n    }\n  },\n  // #endif\n  \n  // #ifdef VUE3\n  beforeUnmount() {\n    // 判断当前页面是否存在parent和chldren，一般在checkbox和checkbox-group父子联动的场景会有此情况\n    // 组件销毁时，移除子组件在父组件children数组中的实例，释放资源，避免数据混乱\n    if(this.parent && uni.$u.test.array(this.parent.children)) {\n    \t// 组件销毁时，移除父组件中的children数组中对应的实例\n    \tconst childrenList = this.parent.children\n    \tchildrenList.map((child, index) => {\n    \t\t// 如果相等，则移除\n    \t\tif(child === this) {\n    \t\t\tchildrenList.splice(index, 1)\n    \t\t}\n    \t})\n    }\n  },\n  // #endif\n}\n"],"names":["uni"],"mappings":";;AAAA,MAAe,QAAA;AAAA,EACd,OAAO;AACN,WAAO,CAAE;AAAA,EACT;AAAA,EACD,SAAS;AAER,SAAK,GAAG,UAAU,KAAK;AAAA,EACvB;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,UAAU,UAAU,KAAK;AACxB,aAAO,IAAI,QAAQ,aAAW;AAC7BA,sBAAAA,MAAI,oBAAqB,EACzB,GAAG,IAAI,EAAE,MAAM,cAAc,QAAQ,EAAE,QAAQ,EAC7C,mBAAmB,UAAQ;AAC3B,cAAI,OAAO,MAAM,QAAQ,IAAI,KAAK,KAAK,QAAQ;AAC9C,oBAAQ,IAAI;AAAA,UACZ;AACD,cAAI,CAAC,OAAO,MAAM;AACjB,oBAAQ,IAAI;AAAA,UACZ;AAAA,QACP,CAAM,EACA,KAAM;AAAA,MACZ,CAAI;AAAA,IACD;AAAA,IACD,cAAc,aAAa,IAAI;AAE9B,UAAG,CAAC,KAAK;AAAQ,aAAK,SAAS;AAI/B,WAAK,SAAS,KAAK,GAAG,QAAQ,KAAK,MAAM,UAAU;AACnD,UAAG,KAAK,QAAQ;AAEf,eAAO,KAAK,KAAK,UAAU,EAAE,IAAI,SAAO;AACvC,eAAK,WAAW,GAAG,IAAI,KAAK,OAAO,GAAG;AAAA,QAC3C,CAAK;AAED,aAAK,WAAW,QAAQ,KAAK,OAAO;AAAA,MAEpC;AAAA,IACD;AAAA;AAAA,IAED,aAAa,GAAG;AACf,WAAK,EAAE,mBAAmB,EAAE,gBAAiB;AAAA,IAC7C;AAAA,EACD;AAAA,EACD,gBAAgB;AACfA,kBAAG,MAAC,MAAM,gBAAgB;AAAA,EAC1B;AAAA,EAmBA,gBAAgB;AAGd,QAAG,KAAK,UAAUA,cAAAA,MAAI,GAAG,KAAK,MAAM,KAAK,OAAO,QAAQ,GAAG;AAE1D,YAAM,eAAe,KAAK,OAAO;AACjC,mBAAa,IAAI,CAAC,OAAO,UAAU;AAElC,YAAG,UAAU,MAAM;AAClB,uBAAa,OAAO,OAAO,CAAC;AAAA,QAC5B;AAAA,MACP,CAAM;AAAA,IACD;AAAA,EACF;AAEH;;"}