{"version":3,"file":"timeFrom.js","sources":["uni_modules/vk-uview-ui/libs/function/timeFrom.js"],"sourcesContent":["import timeFormat from '../../libs/function/timeFormat.js';\n\n/**\n * 时间戳转为多久之前\n * @param String timestamp 时间戳\n * @param String | Boolean format 如果为时间格式字符串，超出一定时间范围，返回固定的时间格式；\n * 如果为布尔值false，无论什么时间，都返回多久以前的格式\n */\nfunction timeFrom(dateTime = null, format = 'yyyy-mm-dd') {\n\t// 如果为null,则格式化当前时间\n\tif (!dateTime) dateTime = Number(new Date());\n\t// 如果dateTime长度为10或者13，则为秒和毫秒的时间戳，如果超过13位，则为其他的时间格式\n\tif (dateTime.toString().length == 10) dateTime *= 1000;\n\tlet timestamp = + new Date(Number(dateTime));\n\n\tlet timer = (Number(new Date()) - timestamp) / 1000;\n\t// 如果小于5分钟,则返回\"刚刚\",其他以此类推\n\tlet tips = '';\n\tswitch (true) {\n\t\tcase timer < 300:\n\t\t\ttips = '刚刚';\n\t\t\tbreak;\n\t\tcase timer >= 300 && timer < 3600:\n\t\t\ttips = parseInt(timer / 60) + '分钟前';\n\t\t\tbreak;\n\t\tcase timer >= 3600 && timer < 86400:\n\t\t\ttips = parseInt(timer / 3600) + '小时前';\n\t\t\tbreak;\n\t\tcase timer >= 86400 && timer < 2592000:\n\t\t\ttips = parseInt(timer / 86400) + '天前';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// 如果format为false，则无论什么时间戳，都显示xx之前\n\t\t\tif(format === false) {\n\t\t\t\tif(timer >= 2592000 && timer < 365 * 86400) {\n\t\t\t\t\ttips = parseInt(timer / (86400 * 30)) + '个月前';\n\t\t\t\t} else {\n\t\t\t\t\ttips = parseInt(timer / (86400 * 365)) + '年前';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttips = timeFormat(timestamp, format);\n\t\t\t}\n\t}\n\treturn tips;\n}\n\nexport default timeFrom;\n"],"names":["timeFormat"],"mappings":";;AAQA,SAAS,SAAS,WAAW,MAAM,SAAS,cAAc;AAEzD,MAAI,CAAC;AAAU,eAAW,OAAO,oBAAI,KAAM,CAAA;AAE3C,MAAI,SAAS,SAAU,EAAC,UAAU;AAAI,gBAAY;AAClD,MAAI,YAAY,CAAE,IAAI,KAAK,OAAO,QAAQ,CAAC;AAE3C,MAAI,SAAS,OAAO,oBAAI,KAAI,CAAE,IAAI,aAAa;AAE/C,MAAI,OAAO;AACX,UAAQ,MAAI;AAAA,IACX,KAAK,QAAQ;AACZ,aAAO;AACP;AAAA,IACD,MAAK,SAAS,OAAO,QAAQ;AAC5B,aAAO,SAAS,QAAQ,EAAE,IAAI;AAC9B;AAAA,IACD,MAAK,SAAS,QAAQ,QAAQ;AAC7B,aAAO,SAAS,QAAQ,IAAI,IAAI;AAChC;AAAA,IACD,MAAK,SAAS,SAAS,QAAQ;AAC9B,aAAO,SAAS,QAAQ,KAAK,IAAI;AACjC;AAAA,IACD;AAEC,UAAG,WAAW,OAAO;AACpB,YAAG,SAAS,UAAW,QAAQ,MAAM,OAAO;AAC3C,iBAAO,SAAS,SAAS,QAAQ,GAAG,IAAI;AAAA,QAC7C,OAAW;AACN,iBAAO,SAAS,SAAS,QAAQ,IAAI,IAAI;AAAA,QACzC;AAAA,MACL,OAAU;AACN,eAAOA,+CAAU,WAAC,WAAW,MAAM;AAAA,MACnC;AAAA,EACF;AACD,SAAO;AACR;;"}