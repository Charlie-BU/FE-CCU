{"version":3,"file":"api.js","sources":["utils/js/api.js"],"sourcesContent":["// 服务器ip\nlet local = \"http://127.0.0.1:8050\";\nlet release = \"https://charlie.black\";\nlet run = release;\n\n// 封装Promise\nexport const uniRequest = (method = \"GET\", blue = null, url = null, data = null, headers = null) => {\n\tlet fullURL = run + \"/\" + blue + url;\n\n\tif (method === \"GET\" && data) {\n\t\tconst params = new URLSearchParams(data).toString();\n\t\tfullURL += \"?\" + params;\n\t\tdata = null;\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tuni.request({\n\t\t\turl: fullURL,\n\t\t\tmethod: method,\n\t\t\theader: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t...(headers || {})\n\t\t\t},\n\t\t\tdata: method === \"GET\" ? data : JSON.stringify(data),\n\t\t\tdataType: \"json\",\n\t\t\tsslVerify: false,\n\t\t\twithCredentials: false,\n\t\t\tfirstIpv4: false,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\tresolve(res.data);\n\t\t\t\t} else {\n\t\t\t\t\treject(res.data);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"服务器繁忙，请稍后再试\",\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\tduration: 1000\n\t\t\t\t});\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t});\n};\n\n// 使用地狱回调\n// export const uniRequest = (request_type = null, blue = null, url = null, data = null, success = null) => {\n// \tlet fullURL = run + '/' + blue + '/' + url;\n// \tuni.request({\n// \t\turl: fullURL,\n// \t\tdata: data,\n// \t\tdataType: \"json\",\n// \t\tmethod: request_type,\n// \t\tsslVerify: false,\n// \t\twithCredentials: false,\n// \t\tfirstIpv4: false,\n// \t\tsuccess(res) {\n// \t\t\tif (success) {\n// \t\t\t\tsuccess(res)\n// \t\t\t\t// console.log(\"success :\", res.data)\t\t// 包含敏感信息，生产环境切勿加\n// \t\t\t}\n// \t\t},\n// \t\tfail(e) {\n// \t\t\tconsole.log('fail :', e);\n\n// \t\t},\n// \t\t// complete(res) {\n// \t\t// \tconsole.log(\"complete :\", res);\n// \t\t// },\n// \t});\n// }\n"],"names":["uni"],"mappings":";;AAEA,IAAI,UAAU;AACd,IAAI,MAAM;AAGE,MAAC,aAAa,CAAC,SAAS,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,MAAM,UAAU,SAAS;AACnG,MAAI,UAAU,MAAM,MAAM,OAAO;AAEjC,MAAI,WAAW,SAAS,MAAM;AAC7B,UAAM,SAAS,IAAI,gBAAgB,IAAI,EAAE,SAAQ;AACjD,eAAW,MAAM;AACjB,WAAO;AAAA,EACP;AAED,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK;AAAA,MACL;AAAA,MACA,QAAQ;AAAA,QACP,gBAAgB;AAAA,QAChB,GAAI,WAAW,CAAE;AAAA,MACjB;AAAA,MACD,MAAM,WAAW,QAAQ,OAAO,KAAK,UAAU,IAAI;AAAA,MACnD,UAAU;AAAA,MACV,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,WAAW;AAAA,MACX,SAAS,CAAC,QAAQ;AACjB,YAAI,IAAI,eAAe,KAAK;AAC3B,kBAAQ,IAAI,IAAI;AAAA,QACrB,OAAW;AACN,iBAAO,IAAI,IAAI;AAAA,QACf;AAAA,MACD;AAAA,MACD,MAAM,CAAC,QAAQ;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACf,CAAK;AACD,eAAO,GAAG;AAAA,MACV;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;"}